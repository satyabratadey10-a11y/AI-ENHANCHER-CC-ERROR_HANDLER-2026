<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8"/>
<meta name="viewport" content="width=device-width, initial-scale=1.0"/>
<title>APEX AI ‚Äî Premium Photo Upscaler</title>
<link rel="preconnect" href="https://fonts.googleapis.com"/>
<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin/>
<link href="https://fonts.googleapis.com/css2?family=Orbitron:wght@400;600;800;900&family=DM+Sans:ital,wght@0,300;0,400;0,500;0,600;1,300&display=swap" rel="stylesheet"/>
<link rel="stylesheet" href="style.css">
</head>
<body>

<div class="bg-layer">
  <div class="orb orb1"></div>
  <div class="orb orb2"></div>
  <div class="orb orb3"></div>
  <div class="orb orb4"></div>
</div>
<canvas id="particleCanvas"></canvas>

<div class="alerts">
  <div class="alert alert-success" id="alertSuccess"></div>
  <div class="alert alert-error"   id="alertError"></div>
  <div class="alert alert-info"    id="alertInfo"></div>
</div>

<div class="error-modal" id="systemErrorModal" style="display: none; position: fixed; top: 0; left: 0; width: 100%; height: 100%; background: rgba(0,0,0,0.9); z-index: 9999; align-items: center; justify-content: center; padding: 20px;">
    <div style="background: #2b0808; border: 2px solid #f44336; border-radius: 20px; padding: 40px; max-width: 600px; width: 100%; color: white;">
        <h2 style="color: #ff5252; margin-bottom: 15px;">üö® SYSTEM HALTED</h2>
        <div id="errTechnical" style="font-family: monospace; background: rgba(0,0,0,0.8); padding: 15px; color: #ff8a80; margin: 15px 0;">Error</div>
        <button onclick="location.reload()" style="background: #f44336; color: white; border: none; padding: 15px; width: 100%; border-radius: 10px; font-weight: bold;">Reload Application</button>
    </div>
</div>

<div class="app-wrapper">

  <header>
    <div class="logo-badge"><span class="dot"></span> AI-Powered Engine Active</div>
    <h1>APEX AI UPSCALER</h1>
    <p class="subtitle">Premium Photo Enhancement & Color Correction ‚Äî Powered by Neural Processing</p>
  </header>

  <div class="stack">

    <div class="glass-card" id="uploadSection">
      <div class="section-label">01 ‚Äî Import Image</div>
      <label for="fileInput" class="upload-zone" id="uploadZone">
        <div class="upload-prompt" id="uploadPrompt">
          <div class="upload-icon-wrap">üì∑</div>
          <div class="upload-title">Drop your image here</div>
          <div class="upload-sub">PNG, JPG, WEBP up to 50MB ¬∑ Drag & drop or click to browse</div>
          <span class="btn btn-ghost" style="pointer-events:none;">Browse Files</span>
        </div>
        <div class="uploaded-media" id="mediaPreview">
            <button class="delete-btn" onclick="deleteFile(event)">√ó</button>
            <img id="uploadedImage" src="" alt="Uploaded"/>
        </div>
      </label>
      <input type="file" id="fileInput" accept="image/*"/>
    </div>

    <div id="ccSection" class="main-grid" style="display: none;">
      
      <div class="glass-card">
        <div class="section-label">02 ‚Äî Color Presets</div>
        <div id="ccFilters"></div>
        <div class="preset-actions">
          <button class="btn btn-outline" onclick="saveCustomPreset()" style="flex:1;">üíæ Save Custom Preset</button>
        </div>
      </div>

      <div class="glass-card">
        <div class="section-label">03 ‚Äî Color Correction</div>
        <div class="sliders-grid">
          <div class="slider-item"><div class="slider-header"><span class="slider-name">Brightness</span><span class="slider-val" id="brightnessValue">0</span></div><input type="range" id="brightness" min="-100" max="100" value="0" oninput="updateValue('brightness',this.value)"></div>
          <div class="slider-item"><div class="slider-header"><span class="slider-name">Contrast</span><span class="slider-val" id="contrastValue">0</span></div><input type="range" id="contrast" min="-100" max="100" value="0" oninput="updateValue('contrast',this.value)"></div>
          <div class="slider-item"><div class="slider-header"><span class="slider-name">Saturation</span><span class="slider-val" id="saturationValue">0</span></div><input type="range" id="saturation" min="-100" max="100" value="0" oninput="updateValue('saturation',this.value)"></div>
          <div class="slider-item"><div class="slider-header"><span class="slider-name">Exposure</span><span class="slider-val" id="exposureValue">0</span></div><input type="range" id="exposure" min="-100" max="100" value="0" oninput="updateValue('exposure',this.value)"></div>
          <div class="slider-item"><div class="slider-header"><span class="slider-name">Temperature</span><span class="slider-val" id="temperatureValue">0</span></div><input type="range" id="temperature" min="-100" max="100" value="0" oninput="updateValue('temperature',this.value)"></div>
          <div class="slider-item"><div class="slider-header"><span class="slider-name">Tint</span><span class="slider-val" id="tintValue">0</span></div><input type="range" id="tint" min="-100" max="100" value="0" oninput="updateValue('tint',this.value)"></div>
          <div class="slider-item"><div class="slider-header"><span class="slider-name">Vibrance</span><span class="slider-val" id="vibranceValue">0</span></div><input type="range" id="vibrance" min="-100" max="100" value="0" oninput="updateValue('vibrance',this.value)"></div>
          <div class="slider-item"><div class="slider-header"><span class="slider-name">Sharpness</span><span class="slider-val" id="sharpnessValue">0</span></div><input type="range" id="sharpness" min="0" max="100" value="0" oninput="updateValue('sharpness',this.value)"></div>
        </div>
      </div>
    </div>

    <div class="glass-card" id="settingsSection" style="display: none;">
      <div class="section-label full-col" style="grid-column:1/-1;">04 ‚Äî Output Settings</div>
      <div class="setting-group">
        <label class="setting-label">Upscale Multiplier</label>
        <select id="upscaleMultiplier"><option value="2">‚Üë 2√ó Upscale</option><option value="4" selected>‚Üë 4√ó Upscale</option><option value="8">‚Üë 8√ó Ultra</option></select>
      </div>
      <div class="setting-group">
        <label class="setting-label">AI Mode</label>
        <select id="aiMode"><option>Real-ESRGAN</option><option>Stable Diffusion</option><option>SRCNN Pro</option></select>
      </div>
      <div class="setting-group">
        <label class="setting-label">Output Format</label>
        <select id="outputFormat"><option value="png">PNG (Lossless)</option><option value="jpeg" selected>JPG (Optimized)</option><option value="webp">WebP (Modern)</option></select>
      </div>
    </div>

    <div id="actionButtons" class="glass-card" style="padding: 20px 28px; display: none;">
      <div class="section-label">05 ‚Äî Process</div>
      <div style="display:flex; gap:12px; flex-wrap:wrap;">
        <button class="btn btn-outline" id="analyzeBtn" onclick="analyzeImage()" style="flex:1; min-width:140px;">üîç Analyze Image</button>
        <button class="btn btn-ghost" id="autoEnhanceBtn" onclick="runAutoEnhance()" style="flex:1; min-width:140px;">‚ú® Auto-Enhance</button>
        <button class="btn btn-danger" id="processBtn" onclick="processImage()" style="flex:1; min-width:140px;">üöÄ Start Upscale</button>
      </div>
    </div>

    <div class="glass-card" id="progressContainer">
      <div class="section-label">Processing</div>
      <div class="progress-header">
        <span class="progress-title">‚ö° Neural Engine Active</span>
        <span class="progress-status" id="progressStatus">Upscaling pixels‚Ä¶</span>
      </div>
      <div class="progress-track">
        <div id="progressFill"></div>
      </div>
    </div>

    <div class="glass-card" id="analysisPanel">
      <div class="section-label">Image Analysis</div>
      <div class="analysis-grid" id="analysisResults">
        <div class="analysis-stat"><span class="analysis-stat-val" id="stat-res">‚Äî</span><span class="analysis-stat-label">Resolution</span></div>
        <div class="analysis-stat"><span class="analysis-stat-val" id="stat-quality">‚Äî</span><span class="analysis-stat-label">Quality Score</span></div>
        <div class="analysis-stat"><span class="analysis-stat-val" id="stat-depth">‚Äî</span><span class="analysis-stat-label">Color Depth</span></div>
        <div class="analysis-stat"><span class="analysis-stat-val" id="stat-ready">Ready</span><span class="analysis-stat-label">Target Output</span></div>
      </div>
    </div>

    <div class="glass-card" id="previewSection">
      <div class="preview-header">
        <div class="section-label" style="margin:0;">06 ‚Äî Before / After</div>
        <div class="preview-badges"><span class="badge badge-before">ORIGINAL</span><span class="badge badge-after">ENHANCED</span></div>
      </div>
      <div class="glow-line"></div>

      <div id="beforeAfterSlider">
        <img id="baOriginal" src="" alt="Original"/>
        <img id="baEnhanced" src="" alt="Enhanced"/>
        <span class="ba-label ba-label-before">BEFORE</span>
        <span class="ba-label ba-label-after">AFTER</span>
        <div id="baHandle"></div>
      </div>
      <p style="text-align:center; color:var(--text-muted); font-size:0.8rem; margin-top:4px;">‚Üê Drag the slider to compare ‚Üí</p>

      <div class="preview-footer" style="margin-top: 20px;">
        <button class="btn btn-success" onclick="downloadResult()" style="min-width:200px;">‚¨á Download Image</button>
      </div>
    </div>

  </div>
</div>

<footer><p>APEX AI Upscaler ‚Äî Built with <span>Neural Processing</span> & <span>Color Science</span></p></footer>

<script src="app.js"></script>
</body>
</html>

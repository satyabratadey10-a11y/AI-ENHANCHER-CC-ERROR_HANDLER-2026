<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="description" content="AI-powered photo upscaler with Web Worker optimization and Glass UI">
    <meta name="theme-color" content="#667eea">
    <title>AI Photo Upscaler - Ultimate Pro Edition</title>
    <link rel="stylesheet" href="style.css">
</head>
<body>
    <div id="particles"></div>

    <div class="error-modal" id="systemErrorModal">
        <div class="error-content">
            <h2 id="errTitle">üö® SYSTEM HALTED</h2>
            <div class="error-section">
                <span class="error-label">Diagnostics:</span>
                <div style="color: #e0e0e0; font-size: 1.1em;" id="errDescription">The processing engine was interrupted.</div>
            </div>
            <div class="error-section">
                <span class="error-label">Technical Trace:</span>
                <div class="error-code" id="errTechnical">Unknown memory fault.</div>
            </div>
            <div class="error-section">
                <span class="error-label">Recommended Fix:</span>
                <div style="color: #4caf50; font-weight: 700; font-size: 1.1em;" id="errFix">Please refresh the page and try again.</div>
            </div>
            <button class="close-error-btn" onclick="location.reload()">Reload Application</button>
        </div>
    </div>

    <div class="container">
        <div class="header">
            <h1>‚ú® AI Photo Upscaler</h1>
            <p>Premium Glass UI ‚Ä¢ Hardware Accelerated ‚Ä¢ Zero Crash</p>
        </div>

        <div class="main-card">
            <div id="alertSuccess" class="alert alert-success"></div>
            <div id="alertError" class="alert alert-error"></div>
            <div id="alertInfo" class="alert alert-info"></div>

            <div id="uploadSection" class="upload-section">
                <div class="upload-content">
                    <div class="upload-icon">üì§</div>
                    <h3 style="color: #fff; margin-bottom: 10px;">Upload Your Media</h3>
                    <p style="color: rgba(255,255,255,0.7); margin-bottom: 25px;">Supports: JPG, PNG, WebP (Max 50MB)</p>
                    <label for="fileInput" class="btn btn-primary">üìÅ Browse Files</label>
                    <input type="file" id="fileInput" accept="image/*">
                </div>
                <div class="uploaded-media">
                    <button class="delete-btn" onclick="deleteFile()">√ó</button>
                    <img id="uploadedImage" class="uploaded-image" alt="Uploaded">
                </div>
            </div>

            <div id="ccSection" class="cc-section" style="display: none;">
                <h3 style="color: #fff; margin-bottom: 20px; font-size: 1.5em;">üé® Premium Presets</h3>
                <div class="cc-filters" id="ccFilters"></div>

                <h3 style="color: #fff; margin: 35px 0 20px; font-size: 1.5em;">‚öôÔ∏è Advanced Color Correction</h3>
                
                <div class="sliders-grid">
                    <div class="control-row"><label>Brightness</label><input type="range" id="brightness" min="-100" max="100" value="0" oninput="updateValue('brightness', this.value)"><div class="control-value" id="brightnessValue">0</div></div>
                    <div class="control-row"><label>Contrast</label><input type="range" id="contrast" min="-100" max="100" value="0" oninput="updateValue('contrast', this.value)"><div class="control-value" id="contrastValue">0</div></div>
                    <div class="control-row"><label>Saturation</label><input type="range" id="saturation" min="-100" max="100" value="0" oninput="updateValue('saturation', this.value)"><div class="control-value" id="saturationValue">0</div></div>
                    <div class="control-row"><label>Exposure</label><input type="range" id="exposure" min="-100" max="100" value="0" oninput="updateValue('exposure', this.value)"><div class="control-value" id="exposureValue">0</div></div>
                    <div class="control-row"><label>Temperature</label><input type="range" id="temperature" min="-100" max="100" value="0" oninput="updateValue('temperature', this.value)"><div class="control-value" id="temperatureValue">0</div></div>
                    <div class="control-row"><label>Tint</label><input type="range" id="tint" min="-100" max="100" value="0" oninput="updateValue('tint', this.value)"><div class="control-value" id="tintValue">0</div></div>
                    <div class="control-row"><label>Vibrance</label><input type="range" id="vibrance" min="-100" max="100" value="0" oninput="updateValue('vibrance', this.value)"><div class="control-value" id="vibranceValue">0</div></div>
                    <div class="control-row"><label>Sharpness</label><input type="range" id="sharpness" min="-100" max="100" value="0" oninput="updateValue('sharpness', this.value)"><div class="control-value" id="sharpnessValue">0</div></div>
                </div>
            </div>

            <div class="settings" id="settingsSection" style="display: none;">
                <div class="setting-group">
                    <label>Upscale Multiplier</label>
                    <select id="qualitySelect">
                        <option value="2">2x Enhancement</option>
                        <option value="4" selected>4x Ultra HD (Recommended)</option>
                        <option value="8">8x Maximum Quality</option>
                    </select>
                </div>
                <div class="setting-group">
                    <label>AI Processing Mode</label>
                    <select id="aiModeSelect">
                        <option value="standard">Standard Engine</option>
                        <option value="portrait">Portrait & Face Recovery</option>
                        <option value="landscape">Landscape & Scenery HDR</option>
                    </select>
                </div>
                <div class="setting-group">
                    <label>Output Format</label>
                    <select id="formatSelect">
                        <option value="png">PNG (Lossless Quality)</option>
                        <option value="jpeg" selected>JPG (Faster & Lighter)</option>
                        <option value="webp">WebP (Modern Compression)</option>
                    </select>
                </div>
            </div>

            <div style="text-align: center; margin: 40px 0;" id="actionButtons" style="display: none;">
                <button class="btn btn-info" id="analyzeBtn" onclick="analyzeImage()">üîç Analyze Image</button>
                <button class="btn btn-primary" id="autoEnhanceBtn" onclick="runAutoEnhance()">‚ú® AI Auto-Enhance</button>
                <button class="btn btn-success" id="processBtn" onclick="processImage()">üöÄ Start Manual Upscale</button>
            </div>

            <div class="loading-spinner" id="loadingSpinner"></div>
            
            <div class="progress-container" id="progressContainer">
                <div style="text-align: center; margin-bottom: 10px; color: #a5b4fc; font-weight: 700;">Processing Pixels...</div>
                <div class="progress-bar"><div class="progress-fill" id="progressFill">0%</div></div>
            </div>

            <div class="analysis-panel" id="analysisPanel">
                <h2 style="color: #fff; margin-bottom: 25px; font-size: 1.8em;">üìä AI Diagnostic Report</h2>
                <div class="analysis-results" id="analysisResults"></div>
            </div>

            <div class="preview-section" id="previewSection">
                <div class="preview-grid">
                    <div class="preview-box">
                        <div class="preview-header">Original Image</div>
                        <img id="originalPreview" class="preview-image" alt="Original">
                        <div class="stats" id="originalStats"></div>
                    </div>
                    <div class="preview-box">
                        <div class="preview-header" style="background: var(--success-gradient); color: #000;">Enhanced Output</div>
                        <img id="upscaledPreview" class="preview-image" alt="Enhanced">
                        <div class="stats" id="upscaledStats"></div>
                    </div>
                </div>
                <div style="text-align: center; margin-top: 30px;">
                    <button class="btn btn-primary" id="downloadBtn" style="padding: 20px 60px; font-size: 1.2em;" onclick="downloadResult()">‚¨áÔ∏è Download High-Res Image</button>
                </div>
            </div>
        </div>
    </div>

    <script src="app.js"></script>
</body>
</html>
